import{j as r}from"./index-BhdO03n1.js";import{r as N}from"./vendor-D4K9R2Ee.js";import{u as U}from"./router-DzIO2EIX.js";import"./helmet-DvwHyIQz.js";import"./supabase-CSOBKBEq.js";import"./ui-CpBmjgGk.js";import"./utils-CtQT1Vl0.js";class L{constructor(t=0,i="Network Error"){this.status=t,this.text=i}}const I=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},l={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:I()},h=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},P=(e,t="https://api.emailjs.com")=>{if(!e)return;const i=h(e);l.publicKey=i.publicKey,l.blockHeadless=i.blockHeadless,l.storageProvider=i.storageProvider,l.blockList=i.blockList,l.limitRate=i.limitRate,l.origin=i.origin||t},D=async(e,t,i={})=>{const a=await fetch(l.origin+e,{method:"POST",headers:i,body:t}),n=await a.text(),p=new L(a.status,n);if(a.ok)return p;throw p},E=(e,t,i)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!i||typeof i!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},T=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},k=e=>e.webdriver||!e.languages||e.languages.length===0,K=()=>new L(451,"Unavailable For Headless Browser"),R=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},H=e=>!e.list?.length||!e.watchVariable,F=(e,t)=>e instanceof FormData?e.get(t):e[t],w=(e,t)=>{if(H(e))return!1;R(e.list,e.watchVariable);const i=F(t,e.watchVariable);return typeof i!="string"?!1:e.list.includes(i)},C=()=>new L(403,"Forbidden"),z=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},G=async(e,t,i)=>{const a=Number(await i.get(e)||0);return t-Date.now()+a},j=async(e,t,i)=>{if(!t.throttle||!i)return!1;z(t.throttle,t.id);const a=t.id||e;return await G(a,t.throttle,i)>0?!0:(await i.set(a,Date.now().toString()),!1)},S=()=>new L(429,"Too Many Requests"),M=async(e,t,i,a)=>{const n=h(a),p=n.publicKey||l.publicKey,f=n.blockHeadless||l.blockHeadless,o=n.storageProvider||l.storageProvider,s={...l.blockList,...n.blockList},d={...l.limitRate,...n.limitRate};return f&&k(navigator)?Promise.reject(K()):(E(p,e,t),T(i),i&&w(s,i)?Promise.reject(C()):await j(location.pathname,d,o)?Promise.reject(S()):D("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:p,service_id:e,template_id:t,template_params:i}),{"Content-type":"application/json"}))},q=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},B=e=>typeof e=="string"?document.querySelector(e):e,Y=async(e,t,i,a)=>{const n=h(a),p=n.publicKey||l.publicKey,f=n.blockHeadless||l.blockHeadless,o=l.storageProvider||n.storageProvider,s={...l.blockList,...n.blockList},d={...l.limitRate,...n.limitRate};if(f&&k(navigator))return Promise.reject(K());const m=B(i);E(p,e,t),q(m);const c=new FormData(m);return w(s,c)?Promise.reject(C()):await j(location.pathname,d,o)?Promise.reject(S()):(c.append("lib_version","4.4.1"),c.append("service_id",e),c.append("template_id",t),c.append("user_id",p),D("/api/v1.0/email/send-form",c))},J={init:P,send:M,sendForm:Y,EmailJSResponseStatus:L},O="service_usy9dun",Q="template_l1tz6ch",$="NPNTpy-uFXxyG81mo",X=()=>{const[e,t]=N.useState({isCodeSent:!1,isLoading:!1,error:"",verificationCode:"",attempts:0}),i=()=>Math.floor(1e5+Math.random()*9e5).toString(),a=async o=>{t(s=>({...s,isLoading:!0,error:""}));try{const s=i(),d={to_email:o,verification_code:s,user_name:"Admin"};if((await J.send(O,Q,d,$)).status===200)return localStorage.setItem("verification_code",s),localStorage.setItem("verification_email",o),localStorage.setItem("verification_timestamp",Date.now().toString()),t(c=>({...c,isCodeSent:!0,isLoading:!1,verificationCode:s,error:""})),!0;throw new Error("Email gönderilemedi")}catch(s){return console.error("EmailJS Error:",s),t(d=>({...d,isLoading:!1,error:"Doğrulama kodu gönderilemedi. Lütfen tekrar deneyin."})),!1}};return{...e,sendVerificationCode:a,verifyCode:o=>{const s=localStorage.getItem("verification_code"),d=localStorage.getItem("verification_email"),m=localStorage.getItem("verification_timestamp");if(!s||!d||!m)return t(u=>({...u,error:"Doğrulama kodu bulunamadı. Lütfen tekrar gönderin."})),!1;const c=Date.now()-parseInt(m),g=10*60*1e3;if(c>g)return t(u=>({...u,error:"Doğrulama kodu süresi dolmuş. Lütfen yeni kod isteyin.",isCodeSent:!1})),localStorage.removeItem("verification_code"),localStorage.removeItem("verification_email"),localStorage.removeItem("verification_timestamp"),!1;if(o===s)return localStorage.removeItem("verification_code"),localStorage.removeItem("verification_email"),localStorage.removeItem("verification_timestamp"),t(u=>({...u,error:"",attempts:0})),!0;{const u=e.attempts+1;return t(y=>({...y,attempts:u,error:`Yanlış kod. ${3-u} deneme hakkınız kaldı.`})),u>=3&&(localStorage.removeItem("verification_code"),localStorage.removeItem("verification_email"),localStorage.removeItem("verification_timestamp"),t(y=>({...y,isCodeSent:!1,error:"Çok fazla yanlış deneme. Yeni kod gönderin."}))),!1}},resendCode:async o=>(t(s=>({...s,attempts:0,error:""})),await a(o)),resetState:()=>{t({isCodeSent:!1,isLoading:!1,error:"",verificationCode:"",attempts:0}),localStorage.removeItem("verification_code"),localStorage.removeItem("verification_email"),localStorage.removeItem("verification_timestamp")}}},se=()=>{const e=U(),{isLoading:t,error:i,sendVerificationCode:a,verifyCode:n,resendCode:p,resetState:f}=X(),[o,s]=N.useState({email:"",password:"",verificationCode:""}),[d,m]=N.useState(""),[c,g]=N.useState("credentials"),u=b=>{s({...o,[b.target.name]:b.target.value}),d&&m(""),i&&f()},y=async b=>{b.preventDefault(),m("");const x={email:"ottosokpoes@gmail.com",password:"T$5vQ8w*Y2k9b!L3zH4RQwsXz"};o.email===x.email&&o.password===x.password?await a(o.email)&&g("verification"):m("Geçersiz admin bilgileri")},A=async b=>{if(b.preventDefault(),n(o.verificationCode))try{const v={email:"ottosokpoes@gmail.com",password:"T$5vQ8w*Y2k9b!L3zH4RQwsXz"};o.email===v.email&&o.password===v.password?e("/admin"):(m("Geçersiz admin bilgileri"),g("credentials"),f())}catch(v){m(v.message||"Giriş sırasında bir hata oluştu"),g("credentials"),f()}},V=async()=>{await p(o.email)},_=()=>{g("credentials"),f(),m("")};return r.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[r.jsxDEV("div",{children:[r.jsxDEV("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:c==="credentials"?"Admin Girişi":"Doğrulama Kodu"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:103,columnNumber:11},void 0),r.jsxDEV("p",{className:"mt-2 text-center text-sm text-gray-600",children:c==="credentials"?"Güvenli admin paneline erişim":`${o.email} adresine gönderilen doğrulama kodunu girin`},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:102,columnNumber:9},void 0),c==="credentials"?r.jsxDEV("form",{className:"mt-8 space-y-6",onSubmit:y,children:[r.jsxDEV("div",{className:"space-y-4",children:[r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Admin Email"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:118,columnNumber:15},void 0),r.jsxDEV("input",{id:"email",name:"email",type:"email",required:!0,className:"mt-1 appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-sahibinden-red focus:border-sahibinden-red focus:z-10 sm:text-sm",placeholder:"Admin email adresini girin",value:o.email,onChange:u},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:121,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:117,columnNumber:13},void 0),r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Admin Şifresi"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:134,columnNumber:15},void 0),r.jsxDEV("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-sahibinden-red focus:border-sahibinden-red focus:z-10 sm:text-sm",placeholder:"Admin şifresini girin",value:o.password,onChange:u},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:133,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:116,columnNumber:11},void 0),d&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-3 rounded-lg",children:d},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:151,columnNumber:13},void 0),r.jsxDEV("div",{children:r.jsxDEV("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-sahibinden-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sahibinden-red disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:t?r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:164,columnNumber:19},void 0),"Kod Gönderiliyor..."]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:163,columnNumber:17},void 0):"Doğrulama Kodu Gönder"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:157,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:156,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:115,columnNumber:11},void 0):r.jsxDEV("form",{className:"mt-8 space-y-6",onSubmit:A,children:[r.jsxDEV("div",{className:"space-y-4",children:r.jsxDEV("div",{children:[r.jsxDEV("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700",children:"Doğrulama Kodu"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:177,columnNumber:17},void 0),r.jsxDEV("input",{id:"verificationCode",name:"verificationCode",type:"text",required:!0,className:"mt-1 appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-sahibinden-red focus:border-sahibinden-red focus:z-10 sm:text-sm text-center text-2xl tracking-widest",placeholder:"Doğrulama kodunu girin",value:o.verificationCode,onChange:u},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:180,columnNumber:17},void 0),r.jsxDEV("p",{className:"mt-2 text-xs text-gray-500 text-center",children:"Doğrulama kodunu girin"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:190,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:176,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:175,columnNumber:13},void 0),(d||i)&&r.jsxDEV("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-3 rounded-lg",children:d||i},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:197,columnNumber:15},void 0),r.jsxDEV("div",{className:"space-y-3",children:[r.jsxDEV("button",{type:"submit",disabled:t||o.verificationCode.length!==6,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-sahibinden-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sahibinden-red disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:t?r.jsxDEV("div",{className:"flex items-center",children:[r.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:210,columnNumber:21},void 0),"Giriş Yapılıyor..."]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:209,columnNumber:19},void 0):"Giriş Yap"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:203,columnNumber:15},void 0),r.jsxDEV("div",{className:"flex justify-between text-sm",children:[r.jsxDEV("button",{type:"button",onClick:_,className:"text-gray-600 hover:text-sahibinden-red transition-colors",children:"← Geri Dön"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:219,columnNumber:17},void 0),r.jsxDEV("button",{type:"button",onClick:V,disabled:t,className:"text-sahibinden-red hover:text-red-700 transition-colors disabled:opacity-50",children:"Kodu Yeniden Gönder"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:226,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:218,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:202,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:174,columnNumber:11},void 0),r.jsxDEV("div",{className:"text-center",children:r.jsxDEV("button",{onClick:()=>e("/"),className:"text-sm text-gray-600 hover:text-sahibinden-red transition-colors",children:"← Ana sayfaya dön"},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:240,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:239,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:101,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/DELL/Desktop/optt - Kopya - Kopya/src/pages/AdminLogin.tsx",lineNumber:100,columnNumber:5},void 0)};export{se as default};
